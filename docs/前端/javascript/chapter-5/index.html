<!doctype html><html lang=zh dir=ltr><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>5-JavaScript 文档对象模型 | 前端 | 安橙的博客</title><meta name=generator content="Hugo Eureka 0.9.3"><link rel=stylesheet href=https://blog.ans20xx.com/css/eureka.min.9cec6350e37e534b0338fa9a085bf06855de3b0f2dcf857e792e5e97b07ea905d4d5513db554cbc26a9c3da622bae92d.css><script defer src=https://blog.ans20xx.com/js/eureka.min.fa9a6bf6d7a50bb635b4cca7d2ba5cf3dfb095ae3798773f1328f7950028b48c17d06276594e1b5f244a25a6c969a705.js></script>
<link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload href="https://fonts.googleapis.com/css2?family=Lora:wght@400;600;700&family=Noto+Serif+SC:wght@400;600;700&display=swap" as=style onload='this.onload=null,this.rel="stylesheet"'><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.4.0/build/styles/base16/solarized-light.min.css media=print onload='this.media="all",this.onload=null' crossorigin><script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.4.0/build/highlight.min.js crossorigin></script>
<script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.4.0/build/languages/dart.min.js crossorigin></script>
<link rel=stylesheet href=https://blog.ans20xx.com/css/highlightjs.min.2958991528e43eb6fc9b8c4f2b8e052f79c4010718e1d1e888a777620e9ee63021c2c57ec7417a3108019bb8c41943e6.css media=print onload='this.media="all",this.onload=null'><script defer type=text/javascript src=https://blog.ans20xx.com/js/fontawesome.min.8c77c7521b1f95ec2031c2a79f5c6a698aa4a0dba5ba649dfbc7f73994cddf3f494be6aac7e5724f35cbf72cfde09703.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css integrity=sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ media=print onload='this.media="all",this.onload=null' crossorigin><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js integrity=sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY crossorigin></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})})</script><script defer src=https://cdn.jsdelivr.net/npm/mermaid@8.14.0/dist/mermaid.min.js integrity=sha384-atOyb0FxAgN9LyAc6PEf9BjgwLISyansgdH8/VXQH8p2o5vfrRgmGIJ2Sg22L0A0 crossorigin></script>
<link rel=icon type=image/png sizes=32x32 href=https://blog.ans20xx.com/images/icon_hu64421c6c7700f606f0ad45d807017b09_5843_32x32_fill_box_center_3.png><link rel=apple-touch-icon sizes=180x180 href=https://blog.ans20xx.com/images/icon_hu64421c6c7700f606f0ad45d807017b09_5843_180x180_fill_box_center_3.png><meta name=description content="描述 JavaScript 中的文档对象模型"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Docs","item":"https://blog.ans20xx.com/docs/"},{"@type":"ListItem","position":2,"name":"前端","item":"https://blog.ans20xx.com/docs/%E5%89%8D%E7%AB%AF/"},{"@type":"ListItem","position":3,"name":"JavaScript","item":"https://blog.ans20xx.com/docs/%E5%89%8D%E7%AB%AF/javascript/"},{"@type":"ListItem","position":4,"name":"5-JavaScript 文档对象模型","item":"https://blog.ans20xx.com/docs/%E5%89%8D%E7%AB%AF/javascript/chapter-5/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.ans20xx.com/docs/%E5%89%8D%E7%AB%AF/javascript/chapter-5/"},"headline":"5-JavaScript 文档对象模型 | 前端 | 安橙的博客","datePublished":"2023-01-27T20:46:46+08:00","dateModified":"2023-01-27T20:46:46+08:00","wordCount":4215,"publisher":{"@type":"Person","name":"WANG Chucheng","logo":{"@type":"ImageObject","url":"https://blog.ans20xx.com/images/icon.png"}},"description":"描述 JavaScript 中的文档对象模型"}</script><meta property="og:title" content="5-JavaScript 文档对象模型 | 前端 | 安橙的博客"><meta property="og:type" content="article"><meta property="og:image" content="https://blog.ans20xx.com/images/icon.png"><meta property="og:url" content="https://blog.ans20xx.com/docs/%E5%89%8D%E7%AB%AF/javascript/chapter-5/"><meta property="og:description" content="描述 JavaScript 中的文档对象模型"><meta property="og:locale" content="zh"><meta property="og:site_name" content="安橙的博客"><meta property="article:published_time" content="2023-01-27T20:46:46+08:00"><meta property="article:modified_time" content="2023-01-27T20:46:46+08:00"><meta property="article:section" content="docs"><body class="flex min-h-screen flex-col"><header class="min-h-16 pl-scrollbar bg-secondary-bg fixed z-50 flex w-full items-center shadow-sm"><div class="mx-auto w-full max-w-screen-xl"><script>let storageColorScheme=localStorage.getItem("lightDarkMode");((storageColorScheme=="Auto"||storageColorScheme==null)&&window.matchMedia("(prefers-color-scheme: dark)").matches||storageColorScheme=="Dark")&&document.getElementsByTagName("html")[0].classList.add("dark")</script><nav class="flex items-center justify-between flex-wrap px-4 py-4 md:py-0"><a href=/ class="me-6 text-primary-text text-xl font-bold">安橙的博客</a>
<button id=navbar-btn class="md:hidden flex items-center px-3 py-2" aria-label="Open Navbar">
<i class="fas fa-bars"></i></button><div id=target class="hidden block md:flex md:grow md:justify-between md:items-center w-full md:w-auto text-primary-text z-20"><div class="md:flex md:h-16 text-sm md:grow pb-4 md:pb-0 border-b md:border-b-0"><a href=/#about class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent me-4">关于我</a>
<a href=/posts/ class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent me-4">博文</a>
<a href=/docs/ class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 selected-menu-item me-4">文档</a>
<a href=/tags/ class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent me-4">标签</a>
<a href=/categories/ class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent me-4">归档</a></div><div class=flex><div class="relative pt-4 md:pt-0"><div class="cursor-pointer hover:text-eureka" id=lightDarkMode><i class="fas fa-adjust"></i></div><div class="fixed hidden inset-0 opacity-0 h-full w-full cursor-default z-30" id=is-open></div><div class="absolute flex flex-col start-0 md:start-auto end-auto md:end-0 hidden bg-secondary-bg w-48 rounded py-2 border border-tertiary-bg cursor-pointer z-40" id=lightDarkOptions><span class="px-4 py-1 hover:text-eureka" name=Light>浅色</span>
<span class="px-4 py-1 hover:text-eureka" name=Dark>深色</span>
<span class="px-4 py-1 hover:text-eureka" name=Auto>自动</span></div></div></div></div><div class="fixed hidden inset-0 opacity-0 h-full w-full cursor-default z-0" id=is-open-mobile></div></nav><script>let element=document.getElementById("lightDarkMode");storageColorScheme==null||storageColorScheme=="Auto"?document.addEventListener("DOMContentLoaded",()=>{window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",switchDarkMode)}):storageColorScheme=="Light"?(element.firstElementChild.classList.remove("fa-adjust"),element.firstElementChild.setAttribute("data-icon","sun"),element.firstElementChild.classList.add("fa-sun")):storageColorScheme=="Dark"&&(element.firstElementChild.classList.remove("fa-adjust"),element.firstElementChild.setAttribute("data-icon","moon"),element.firstElementChild.classList.add("fa-moon")),document.addEventListener("DOMContentLoaded",()=>{getcolorscheme(),switchBurger()})</script></div></header><main class="grow pt-16"><div class=pl-scrollbar><div class="mx-auto w-full max-w-screen-xl lg:px-4 xl:px-8"><div class=lg:pt-12><div class="flex flex-col md:flex-row bg-secondary-bg rounded"><div class="md:w-1/4 lg:w-1/5 border-e"><div class="sticky top-16 pt-6"><div id=sidebar-title class="md:hidden mx-4 px-2 pt-4 pb-2 md:border-b text-tertiary-text md:text-primary-text"><span class=font-semibold>目录</span>
<i class='fas fa-caret-right ms-1'></i></div><div id=sidebar-toc class="hidden md:block overflow-y-auto mx-6 md:mx-0 pe-6 pt-2 md:max-h-doc-sidebar bg-primary-bg md:bg-transparent"><div class="flex flex-wrap ms-4 -me-2 p-2 bg-secondary-bg md:bg-primary-bg rounded"><a class=hover:text-eureka href=https://blog.ans20xx.com/docs/%E5%89%8D%E7%AB%AF/>前端</a></div><ul class=ps-6><li class=py-2><div class=pb-2><a class=hover:text-eureka href=https://blog.ans20xx.com/docs/%E5%89%8D%E7%AB%AF/javascript/>JavaScript</a></div><ul class=ps-6><li class=py-2><div><a class=hover:text-eureka href=https://blog.ans20xx.com/docs/%E5%89%8D%E7%AB%AF/javascript/chapter-6/>6-JavaScript 事件</a></div></li><li class=py-2><div><a class="text-eureka hover:text-eureka" href=https://blog.ans20xx.com/docs/%E5%89%8D%E7%AB%AF/javascript/chapter-5/>5-JavaScript 文档对象模型</a></div></li><li class=py-2><div><a class=hover:text-eureka href=https://blog.ans20xx.com/docs/%E5%89%8D%E7%AB%AF/javascript/chapter-4/>4-JavaScript 判断和循环</a></div></li><li class=py-2><div><a class=hover:text-eureka href=https://blog.ans20xx.com/docs/%E5%89%8D%E7%AB%AF/javascript/chapter-3/>3-JavaScript 函数、方法和对象</a></div></li><li class=py-2><div><a class=hover:text-eureka href=https://blog.ans20xx.com/docs/%E5%89%8D%E7%AB%AF/javascript/chapter-2/>2-JavaScript 基础指令</a></div></li><li class=py-2><div><a class=hover:text-eureka href=https://blog.ans20xx.com/docs/%E5%89%8D%E7%AB%AF/javascript/chapter-1/>1-JavaScript 基础知识</a></div></li></ul></li><li class=py-2><div class=pb-2><a class=hover:text-eureka href=https://blog.ans20xx.com/docs/%E5%89%8D%E7%AB%AF/css/>CSS</a></div><ul class=ps-6><li class=py-2><div><a class=hover:text-eureka href=https://blog.ans20xx.com/docs/%E5%89%8D%E7%AB%AF/css/chapter-7/>7-CSS 图像</a></div></li><li class=py-2><div><a class=hover:text-eureka href=https://blog.ans20xx.com/docs/%E5%89%8D%E7%AB%AF/css/chapter-6/>6-CSS 定位</a></div></li><li class=py-2><div><a class=hover:text-eureka href=https://blog.ans20xx.com/docs/%E5%89%8D%E7%AB%AF/css/chapter-5/>5-CSS 列表、表格和表单</a></div></li><li class=py-2><div><a class=hover:text-eureka href=https://blog.ans20xx.com/docs/%E5%89%8D%E7%AB%AF/css/chapter-4/>4-CSS 盒子</a></div></li><li class=py-2><div><a class=hover:text-eureka href=https://blog.ans20xx.com/docs/%E5%89%8D%E7%AB%AF/css/chapter-3/>3-CSS 文本</a></div></li><li class=py-2><div><a class=hover:text-eureka href=https://blog.ans20xx.com/docs/%E5%89%8D%E7%AB%AF/css/chapter-2/>2-CSS 颜色</a></div></li><li class=py-2><div><a class=hover:text-eureka href=https://blog.ans20xx.com/docs/%E5%89%8D%E7%AB%AF/css/chapter-1/>1-CSS 简介</a></div></li></ul></li><li class=py-2><div class=pb-2><a class=hover:text-eureka href=https://blog.ans20xx.com/docs/%E5%89%8D%E7%AB%AF/html/>HTML</a></div><ul class=ps-6><li class=py-2><div><a class=hover:text-eureka href=https://blog.ans20xx.com/docs/%E5%89%8D%E7%AB%AF/html/chapter-10/>10-HTML5 布局</a></div></li><li class=py-2><div><a class=hover:text-eureka href=https://blog.ans20xx.com/docs/%E5%89%8D%E7%AB%AF/html/chapter-9/>9-HTML5 视频和音频</a></div></li><li class=py-2><div><a class=hover:text-eureka href=https://blog.ans20xx.com/docs/%E5%89%8D%E7%AB%AF/html/chapter-8/>8-HTML5 其他标记</a></div></li><li class=py-2><div><a class=hover:text-eureka href=https://blog.ans20xx.com/docs/%E5%89%8D%E7%AB%AF/html/chapter-7/>7-HTML 表单</a></div></li><li class=py-2><div><a class=hover:text-eureka href=https://blog.ans20xx.com/docs/%E5%89%8D%E7%AB%AF/html/chapter-6/>6-HTML 表格</a></div></li><li class=py-2><div><a class=hover:text-eureka href=https://blog.ans20xx.com/docs/%E5%89%8D%E7%AB%AF/html/chapter-5/>5-HTML 图像</a></div></li><li class=py-2><div><a class=hover:text-eureka href=https://blog.ans20xx.com/docs/%E5%89%8D%E7%AB%AF/html/chapter-4/>4-HTML 链接</a></div></li><li class=py-2><div><a class=hover:text-eureka href=https://blog.ans20xx.com/docs/%E5%89%8D%E7%AB%AF/html/chapter-3/>3-HTML 列表</a></div></li><li class=py-2><div><a class=hover:text-eureka href=https://blog.ans20xx.com/docs/%E5%89%8D%E7%AB%AF/html/chapter-2/>2-HTML 文本</a></div></li><li class=py-2><div><a class=hover:text-eureka href=https://blog.ans20xx.com/docs/%E5%89%8D%E7%AB%AF/html/chapter-1/>1-HTML 结构</a></div></li></ul></li></ul></div></div></div><div class="w-full md:w-3/4 lg:w-4/5 pb-8 pt-2 md:pt-8"><div class=flex><div class="w-full lg:w-3/4 px-6"><article class=prose><h1 class=mb-4>5-JavaScript 文档对象模型</h1><div class="text-tertiary-text not-prose mt-2 flex flex-row flex-wrap items-center"><div class="me-6 my-2"><i class="fas fa-calendar me-1"></i>
<span>2023-01-27</span></div><div class="me-6 my-2"><i class="fas fa-clock me-1"></i>
<span>9分钟阅读时长</span></div></div><h2 id=1-简介>1. 简介</h2><ol><li>文档对象模型规定了浏览器应该如何创建 HTML 页面的模型，以及 JavaScript 如何访问或修改浏览器窗口中的 Web 页面的内容。</li><li>DOM 既不是 HTML 中的一部分，也不是 JavaScript 中的一部分，而是一系列独立的规则，所有主流的浏览器都实现了这些规则。</li><li>规则主要分为两个方面。</li><li>规定 HTML 页面的模型：<ol><li>当浏览器加载 Web 页面时，会再内存中创建页面的模型。</li><li>DOM 规定了浏览器应该使用 DOM 树的方式来创建这个模型。</li><li>DOM 被称为 &ldquo;对象模型&rdquo; 是因为这个模型(DOM树)是由一些对象组成的。</li><li>每个对象都会作为页面的不同部分被加载到浏览器窗口中。</li></ol></li><li>访问和修改 HTML 页面：<ol><li>DOM 同样定义了一些方法和属性，用来访问和修改模型中的对象，用户最终会在浏览器中看到这些修改。</li><li>人们把 DOM 称为 API，API 是程序之间的通信接口。</li><li>DOM 规定了脚本可以向浏览器询问当前页面相关的哪些内容，以及如何通知浏览器去修改用户看到的内容。</li></ol></li></ol><h2 id=2-dom-树是-web-页面的模型>2. DOM 树是 Web 页面的模型</h2><ol><li>当浏览器加载一个 Web 页面时，它会创建这个页面的模型，这个模型被称为 DOM 树，并被保存在浏览器的内存中，该模型由四类主要节点构成。</li><li>文档节点：在 DOM 树的顶端是文档节点，它呈现为整个页面，相当于 document 对象，当需要访问任何其他节点时，都需要通过文档节点进行导航。</li><li>元素节点：HTML 元素描述了 HTML 页面的结构，需要访问 DOM 树时，需要从查找元素开始，一旦找到所需的元素，就可以根据需要来访问它的文本和属性节点。</li><li>属性节点：HTML 元素的开始标签中可以包含若干属性，这些属性在 DOM 树中形成属性节点。属性节点不是所在元素的子节点，它们是这个元素的一部分。当访问一个元素时，有特定的方法和属性用来读取或修改这个元素的属性。</li><li>文本节点：当访问元素节点时，可以访问元素内部的文本，这些文本保存在其文本节点中。文本节点没有子节点。</li></ol><h2 id=3-使用-dom-树>3. 使用 DOM 树</h2><ol><li>访问并更新 DOM 树需要两个步骤：<ol><li>定位到需要操作的元素所对应的节点。</li><li>使用它的文本内容、子元素或属性。</li></ol></li><li>访问元素<ol><li>DOM 查询-选择单个元素节点<ol><li>getElementById() 使用元素的 id 属性</li><li>querySelector() 使用 CSS 选择器，返回第一个匹配的元素</li></ol></li><li>DOM 查询-选择多个元素<ol><li>getElementByClassName() 使用 class 属性</li><li>getElementByTagName() 选择所有使用了指定标记的元素</li><li>querySelectorAll() 选择所有使用了指定标记的元素</li></ol></li><li>DOM 遍历-在元素节点之间遍历<ol><li>可以从一个元素节点移动到另一个相关的元素节点</li><li>parentNode：返回当前元素节点的父节点</li><li>previousSibling/nextSibling 选择 DOM 树中的前一个或后一个兄弟节点</li><li>fistChild/lastChild 选择当前元素的第一个或最后一个子节点</li></ol></li></ol></li><li>操作元素<ol><li>访问/更新文本节点<ol><li>任何元素内部的文本都保存在文本节点中</li><li>使用文本节点唯一属性 nodeValue 从元素中获取或修改文本</li></ol></li><li>操作 HTML 内容<ol><li>innerHTML 可以访问子元素和文本内容</li><li>textContent 仅访问文本内容</li><li>createElement()/createTextNode()/appendChild()/removeChild() 可以用来创建新的节点、将节点添加到树种或者从树中移除节点</li></ol></li><li>访问或更新属性值<ol><li>hasAttribute() 用来检查属性值是否存在。</li><li>getAttribute() 用来获取属性值。</li><li>setAttribute() 用来更新属性值。</li><li>removeAttribute() 用来移除属性。</li></ol></li></ol></li></ol><h2 id=4-缓存-dom-查询>4. 缓存 DOM 查询</h2><ol><li>用来在 DOM 树中查找元素的方法被称为 DOM 查询。</li><li>当需要多次操作同一个元素时，应该使用一个变量来保存这个查询的结果。</li><li>保存到变量中的实际上是元素在 DOM 树中的位置，这个元素节点的属性和方法可以通过这个变量来获取。</li></ol><h2 id=5-访问元素>5. 访问元素</h2><ol><li>DOM 查询可能返回一个元素，也可能返回一个 NodeList，即节点的集合。</li></ol><h2 id=6-选择单一节点的方法>6. 选择单一节点的方法</h2><ol><li><code>getElementById()</code> 和 <code>querySelector()</code> 方法都可以搜索整个文档，然后返回单一元素。</li></ol><h3 id=61-使用-id-属性选择元素>6.1. 使用 id 属性选择元素</h3><ol><li><code>getElementById()</code> 方法运行根据指定的 id 属性来选择单一的元素节点。</li></ol><pre><code class=language-html>&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;使用id属性选择元素&lt;/title&gt;
        &lt;link rel=&quot;stylesheet&quot; href=&quot;hello.css&quot; type=&quot;text/css&quot; /&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;header&gt;
            &lt;div id = &quot;item1&quot;&gt;&lt;/div&gt;
            &lt;div id = &quot;item2&quot;&gt;&lt;/div&gt;
        &lt;/header&gt;
        &lt;script src = &quot;./hello.js&quot;&gt;&lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre><pre><code class=language-css>div {
    height: 50px;
    width: 100px;
    border: 1px solid black;
    background-color: yellow;
}
.red {
    background-color: red;
}
</code></pre><pre><code class=language-js>var el = document.getElementById(&quot;item1&quot;);
el.className = &quot;red&quot;;
</code></pre><p><img src=https://animg.oss-cn-shanghai.aliyuncs.com/2023/01/28/20230128134837.png alt></p><ol start=2><li>通过修改 className 属性来修改元素的类名。</li></ol><h2 id=7-nodelist返回多个元素的-dom-查询>7. NodeList：返回多个元素的 DOM 查询</h2><ol><li>当一个 DOM 方法可以返回多个元素时，它会返回一个 NodeList。</li><li>NodeList 是一组元素节点的集合。每个节点都有索引编号（从 0 开始的数字，就像数组一样）。</li><li>NodeList 看起来像是数组，然而它实际上不是数组，而是一种被称为集合的对象。</li><li>动态和静态 NodeList：<ol><li>在动态 NodeList 中，当脚本更新页面时，NodeList 也会进行更新，以 <code>getElementBy</code> 开头的方法会返回动态 NodeList。</li><li>在静态 NodeList 中，当脚本更新页面之后，NodeList 并不会进行更新，也不会反映脚本做出的变更，一些例如 <code>querySelector</code> 的方法会返回静态 NodeList，它只会反映查询当时的文档内容。</li></ol></li></ol><h2 id=8-使用-class-属性选择元素>8. 使用 class 属性选择元素</h2><ol><li><code>getElementByClassName()</code> 方法允许选择那些 class 属性包含指定值的元素。</li><li>由于可能有多个元素拥有同样的 class 属性，所以该方法会一直返回一个 NodeList。</li></ol><pre><code class=language-html>&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;使用class属性选择元素&lt;/title&gt;
        &lt;link rel=&quot;stylesheet&quot; href=&quot;hello.css&quot; type=&quot;text/css&quot; /&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;header&gt;
            &lt;div&gt;&lt;/div&gt;
            &lt;div class=&quot;cRed&quot;&gt;&lt;/div&gt;
        &lt;/header&gt;
        &lt;script src = &quot;./hello.js&quot;&gt;&lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre><pre><code class=language-js>var el = document.getElementsByClassName(&quot;cRed&quot;);
el[0].className = &quot;red&quot;;
</code></pre><p><img src=https://animg.oss-cn-shanghai.aliyuncs.com/2023/01/28/20230128140251.png alt></p><h2 id=9-使用标签名选择元素>9. 使用标签名选择元素</h2><ol><li><code>getElementsByTagName()</code> 方法允许使用标签名选择元素。</li><li>注意参数名称不需要使用尖括号来包裹标签名。</li></ol><pre><code class=language-js>var el = document.getElementsByTagName(&quot;div&quot;);
for (var i = 0; i &lt; el.length; i++) {
    el[i].className = &quot;red&quot;;
}
</code></pre><p><img src=https://animg.oss-cn-shanghai.aliyuncs.com/2023/01/28/20230128140458.png alt></p><h2 id=10-使用-css-选择器选择元素>10. 使用 CSS 选择器选择元素</h2><ol><li><code>querySelector()</code> 方法返回匹配 CSS 样式选择器的第一个元素节点。</li><li><code>querySelectorAll()</code> 方法以 NodeList 形式返回满足条件的所有节点。</li></ol><h2 id=11-遍历-dom>11. 遍历 DOM</h2><ol><li>得到一个元素节点后，可以使用如下属性来找到其他相关的元素，这种方式被称为遍历 DOM。</li><li><code>parentNode</code> 该属性在 HTML 中找到包含该元素的父节点。</li><li><code>previousSibling</code> 和 <code>nextSibling</code> 这两个属性找到当前节点的前一个或后一个兄弟节点。</li><li><code>firstChild</code> 和 <code>nextChild</code> 这两个属性找到当前元素的第一个或最后一个子节点。</li></ol><h2 id=12-空白节点>12. 空白节点</h2><ol><li>有些浏览器会在元素之间添加一个文本节点，不管它们之间是否真的有空白。</li><li>绝大多数浏览器，都会把元素之间的空白（空格或回车）当作文本节点来处理，因此 <code>previousSibling</code>、<code>firstChild</code> 可能对于不同浏览器返回不同的元素。</li><li>可以通过删除 HTML 中的空白来解决这个问题。</li><li>也可以使用例如 jQuery 框架提供的能力来解决。</li></ol><h2 id=13-获取更新元素内容>13. 获取/更新元素内容</h2><h3 id=131-使用-nodevalue-属性获取和更新文本节点>13.1. 使用 nodeValue 属性获取和更新文本节点</h3><ol><li>选择一个文本节点后，可以使用 <code>nodeValue</code> 属性获取或修改其内容。</li><li>使用 nodeValue 属性时，必须在文本节点上操作，而不是在包含文本的元素节点上操作。</li></ol><pre><code class=language-html>&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;使用 nodeValue 属性获取和更新文本节点&lt;/title&gt;
        &lt;link rel=&quot;stylesheet&quot; href=&quot;hello.css&quot; type=&quot;text/css&quot; /&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;div id = &quot;item1&quot;&gt;旧Node&lt;/div&gt;
        &lt;script src = &quot;./hello.js&quot;&gt;&lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre><pre><code class=language-js>var el = document.getElementById(&quot;item1&quot;);
el.firstChild.nodeValue = &quot;新Node&quot;
</code></pre><p><img src=https://animg.oss-cn-shanghai.aliyuncs.com/2023/01/28/20230128143818.png alt></p><h3 id=132-使用-textcontent-和-innertext-获取和更新文本>13.2. 使用 textContent 和 innerText 获取和更新文本</h3><ol><li>使用 textContent 可以获取或更新包含元素及其子元素中的文本。</li></ol><pre><code class=language-html>&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;使用 textContent 和 innerText 获取和更新文本&lt;/title&gt;
        &lt;link rel=&quot;stylesheet&quot; href=&quot;hello.css&quot; type=&quot;text/css&quot; /&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;div id = &quot;item1&quot;&gt;&lt;em&gt;测试&lt;/em&gt;test&lt;/div&gt;
        &lt;script src = &quot;./hello.js&quot;&gt;&lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre><pre><code class=language-js>var el = document.getElementById(&quot;item1&quot;);
console.log(el.textContent)
// 打印：测试test
</code></pre><ol start=2><li><code>textContent</code> 属性会忽略掉元素内所有的标签。</li><li>同样有个 <code>innerText</code> 属性，不过不建议使用，因为它不会返回任何被 CSS 隐藏的内容，同时性能较差。</li></ol><h2 id=14-添加或移除-html-内容>14. 添加或移除 HTML 内容</h2><ol><li>存在两种不同的方式来添加和移除 DOM 树中的内容：innerHTML 属性和 DOM 操作。</li></ol><h3 id=141-innerhtml-属性>14.1. innerHTML 属性</h3><ol><li>innerHTML 属性可以被用于任何元素节点。</li><li>innerHTML 属性既可以被用来获取内容，也可以被用来修改内容。</li><li>需要更新元素时，新的内容需要以字符串的形式提供，它可以包含后代元素的标签。</li><li>修改内容时，需要把新的内容（包括标签）保存在字符串中，然后设置 innerHTML 为这个值。</li><li>要从元素中移除所有内容，需要将 innerHTML 属性设置为空字符串。</li></ol><h3 id=142-dom-操作>14.2. DOM 操作</h3><ol><li>DOM 操作可以很容易地针对 DOM 树中的独立节点，而 innerHTML 更适合用来更新整个片段。</li><li>DOM 操作会比使用 innerHTML 安全一点，但是它需要更多的代码，速度也会更慢。</li><li>DOM 操作涉及一组和 DOM 相关的方法，允许创建元素和文本节点，然后将其附加到 DOM 树中，或将其从 DOM 树中移除。</li></ol><h4 id=1421-使用-dom-操作添加元素>14.2.1. 使用 DOM 操作添加元素</h4><ol><li>创建元素：可以使用 <code>createElement()</code> 方法创建一个新的元素节点，该元素节点会被保存到一个变量中。</li><li>设置内容：可以使用 <code>createTextNode()</code> 方法创建一个新的文本节点。然后使用 <code>appendChild()</code> 方法将该节点添加到元素节点中。</li><li>添加到 DOM 树中：可以使用 <code>appendChild()</code> 方法将新创建的元素添加到 DOM 树中，也可以使用 <code>insertBefore()</code> 方法将元素添加到指定元素之前。</li></ol><pre><code class=language-html>&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;使用DOM操作添加元素&lt;/title&gt;
        &lt;link rel=&quot;stylesheet&quot; href=&quot;hello.css&quot; type=&quot;text/css&quot; /&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;article&gt;
            &lt;div class = &quot;red&quot;&gt;test&lt;/div&gt;
        &lt;/article&gt;
        &lt;script src = &quot;./hello.js&quot;&gt;&lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre><pre><code class=language-js>var articleEl = document.getElementsByTagName(&quot;article&quot;)[0];
var newEl = document.createElement(&quot;div&quot;);
var newText = document.createTextNode(&quot;测试&quot;);
newEl.appendChild(newText);
articleEl.appendChild(newEl);
</code></pre><p><img src=https://animg.oss-cn-shanghai.aliyuncs.com/2023/01/28/20230128152027.png alt></p><h4 id=1422-使用-dom-操作移除元素>14.2.2. 使用 DOM 操作移除元素</h4><ol><li>选择需要被移除的元素，并将该元素节点保存到变量中。</li><li>把该元素的父元素节点保存变量中。</li><li>使用 <code>removeChild()</code> 方法把元素从它的包含父元素中移除。</li><li>当从 DOM 中移除一个元素时，也会移除它的所有子元素。</li></ol><h3 id=143-两种方式比较>14.3. 两种方式比较</h3><ol><li><code>document.write()</code> 方法可以很简单地向页面中添加内容，它的优缺点如下：</li></ol><ul><li>优点<ol><li>可以快速、简单地向页面添加内容</li></ol></li><li>缺点<ol><li>只在页面初始化时才有效。</li><li>如果在在页面加载完成后使用该方法，则会覆盖整个页面，而不是向页面中添加新的内容。</li><li>大多数人不会使用。</li></ol></li></ul><ol start=2><li><code>innerHTML</code> 属性允许以字符串的方式，获取/更新任何元素中的整个内容(包括里面的标签)。</li></ol><ul><li>优点：<ol><li>可以使用更少的代码添加大量的新标签。</li><li>速度比 DOM 操作更快</li><li>当需要移除元素中的内容时，更简单</li></ol></li><li>缺点：<ol><li>不应该用它来添加来自用户输入的内容，可能会导致安全隐患。</li><li>在添加一个很大的 DOM 片段时，很难独立区分出每一个元素。</li><li>事件处理程序可能会出问题。</li></ol></li></ul><ol start=3><li>DOM 操作提供了一组方法和属性，用来访问、创建以及更新元素和文本节点。</li></ol><ul><li>优点<ol><li>如果 DOM 片段中有大量的兄弟节点，处理其中一个元素节点使用这种方法更合适。</li><li>不会影响事件处理程序。</li><li>可以轻易使用脚本来逐步添加元素。</li></ol></li><li>缺点<ol><li>速度更慢</li><li>需要编写更多代码来实现相同的功能</li></ol></li></ul><h2 id=15-跨站脚本xss攻击>15. 跨站脚本(XSS)攻击</h2><ol><li>如果使用 innerHTML 向页面中添加一些 HTML 内容，需要小心跨站脚本攻击，攻击者会用这种方式来获取用户账号信息。</li><li>XSS 攻击者将恶意代码插入到网站中，网站会展示很多不同的由用户自己创建的内容，例如：<ul><li>用户可以修改信息</li><li>用户可以发表文章</li><li>用户可以上传文件</li></ul></li><li>这些无法控制的数据被称为不可信任数据。</li><li>XSS 可以让攻击者获取到如下信息：<ul><li>DOM 信息</li><li>网站的 Cookie</li><li>会话令牌</li></ul></li></ol><h2 id=16-防范-xss-攻击>16. 防范 XSS 攻击</h2><ol><li>校验提交到服务器上的数据。</li><li>对来自服务器或数据库中的数据进行转义。</li></ol><h2 id=17-属性节点>17. 属性节点</h2><ol><li>得到一个元素节点后，可以在这个元素上使用其他一些对象属性和方法来获取和修改它的 HTML 属性。</li></ol><h3 id=18-检查一个属性并获取它的值>18. 检查一个属性并获取它的值</h3><ol><li>在操作一个属性之前，最好需要检查一下它是否存在。</li><li><code>hasAttribute()</code> 方法可以检查任何一个元素节点的某个属性是否存在。</li><li><code>getAttribute()</code> 方法可以获取指定名称的属性节点。</li></ol><h3 id=19-创建属性并更改其值>19. 创建属性并更改其值</h3><ol><li>使用 <code>className</code> 属性可以修改 class 这个 HTML 属性的值，如果属性不存在，则会创建一个。</li><li><code>setAttribute()</code> 方法允许你更新任何 HTML 属性的值，它使用两个参数：属性名称 + 该属性的值。</li></ol><h3 id=20-移除属性>20. 移除属性</h3><ol><li>需要从元素中移除一个属性时，需要首先选中这个属性。</li><li>之后调用选中属性的 removeAttribute() 方法。</li><li>如果移除一个不存在的属性会报错。</li></ol><h3 id=21-在-chrome-中检查-dom>21. 在 Chrome 中检查 DOM</h3><ol><li>在 Chrome 页面上 右键 -> 检查 -> 选中 Elements 选项卡 -> Properties ，即可看到对应的 DOM 和它的所有属性。</li></ol><p><img src=https://animg.oss-cn-shanghai.aliyuncs.com/2023/01/28/20230128155921.png alt></p></article><div class="-mx-2 mt-4 flex flex-col border-t px-2 pt-4 md:flex-row md:justify-between"><div><span class="text-primary-text block font-bold">上一页</span>
<a href=https://blog.ans20xx.com/docs/%E5%89%8D%E7%AB%AF/javascript/chapter-6/ class=block>6-JavaScript 事件</a></div><div class="mt-4 md:mt-0 md:text-right"><span class="text-primary-text block font-bold">下一页</span>
<a href=https://blog.ans20xx.com/docs/%E5%89%8D%E7%AB%AF/javascript/chapter-4/ class=block>4-JavaScript 判断和循环</a></div></div></div><div class="hidden lg:block lg:w-1/4"><div class="bg-secondary-bg
prose sticky top-16 z-10 hidden px-6 py-4 lg:block"><h3>本页内容</h3></div><div class="sticky-toc
border-s
hidden px-6 pb-6 lg:block"><nav id=TableOfContents><ul><li><a href=#1-简介>1. 简介</a></li><li><a href=#2-dom-树是-web-页面的模型>2. DOM 树是 Web 页面的模型</a></li><li><a href=#3-使用-dom-树>3. 使用 DOM 树</a></li><li><a href=#4-缓存-dom-查询>4. 缓存 DOM 查询</a></li><li><a href=#5-访问元素>5. 访问元素</a></li><li><a href=#6-选择单一节点的方法>6. 选择单一节点的方法</a><ul><li><a href=#61-使用-id-属性选择元素>6.1. 使用 id 属性选择元素</a></li></ul></li><li><a href=#7-nodelist返回多个元素的-dom-查询>7. NodeList：返回多个元素的 DOM 查询</a></li><li><a href=#8-使用-class-属性选择元素>8. 使用 class 属性选择元素</a></li><li><a href=#9-使用标签名选择元素>9. 使用标签名选择元素</a></li><li><a href=#10-使用-css-选择器选择元素>10. 使用 CSS 选择器选择元素</a></li><li><a href=#11-遍历-dom>11. 遍历 DOM</a></li><li><a href=#12-空白节点>12. 空白节点</a></li><li><a href=#13-获取更新元素内容>13. 获取/更新元素内容</a><ul><li><a href=#131-使用-nodevalue-属性获取和更新文本节点>13.1. 使用 nodeValue 属性获取和更新文本节点</a></li><li><a href=#132-使用-textcontent-和-innertext-获取和更新文本>13.2. 使用 textContent 和 innerText 获取和更新文本</a></li></ul></li><li><a href=#14-添加或移除-html-内容>14. 添加或移除 HTML 内容</a><ul><li><a href=#141-innerhtml-属性>14.1. innerHTML 属性</a></li><li><a href=#142-dom-操作>14.2. DOM 操作</a><ul><li><a href=#1421-使用-dom-操作添加元素>14.2.1. 使用 DOM 操作添加元素</a></li><li><a href=#1422-使用-dom-操作移除元素>14.2.2. 使用 DOM 操作移除元素</a></li></ul></li><li><a href=#143-两种方式比较>14.3. 两种方式比较</a></li></ul></li><li><a href=#15-跨站脚本xss攻击>15. 跨站脚本(XSS)攻击</a></li><li><a href=#16-防范-xss-攻击>16. 防范 XSS 攻击</a></li><li><a href=#17-属性节点>17. 属性节点</a><ul><li><a href=#18-检查一个属性并获取它的值>18. 检查一个属性并获取它的值</a></li><li><a href=#19-创建属性并更改其值>19. 创建属性并更改其值</a></li><li><a href=#20-移除属性>20. 移除属性</a></li><li><a href=#21-在-chrome-中检查-dom>21. 在 Chrome 中检查 DOM</a></li></ul></li></ul></nav></div><script>window.addEventListener("DOMContentLoaded",()=>{enableStickyToc()})</script></div></div></div></div></div><script>document.addEventListener("DOMContentLoaded",()=>{hljs.highlightAll(),changeSidebarHeight(),switchDocToc()})</script></div></div></main><footer class=pl-scrollbar><div class="mx-auto w-full max-w-screen-xl"><div class="text-center p-6 pin-b"><p class="text-sm text-tertiary-text">&copy; 2022 <a href=https://www.ans20xx.com/>安橙</a>
&#183; Powered by the <a href=https://github.com/wangchucheng/hugo-eureka class=hover:text-eureka>Eureka</a> theme for <a href=https://gohugo.io class=hover:text-eureka>Hugo</a></p></div></div></footer></body></html>